apiVersion: v1
kind: ConfigMap
metadata:
  name: nats-config
  labels:
    app: nats
data:
  nats.conf: |
    # NATS Server Configuration

    # Client port
    port: 4222

    # Monitoring endpoint
    http_port: 8222

    # Server name (required for JetStream)
    server_name: nats

    # JetStream (persistent streaming)
    jetstream {
      store_dir: /data/jetstream

      # Max memory and storage
      max_memory_store: 256MB
      max_file_store: 4GB
    }

    # Limits
    # 50MB for video files transmitted via NATS (base64 encoded)
    max_payload: 50MB
    max_connections: 1000
    max_control_line: 4KB

    # Timeouts
    write_deadline: "10s"

    # Logging
    debug: false
    trace: false
    logtime: true
