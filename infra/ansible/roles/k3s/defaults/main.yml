---
# k3s role default variables

# k3s installation
k3s_version: "{{ lookup('env', 'K3S_VERSION') | default('latest') }}"
k3s_install_script_url: "https://get.k3s.io"

# k3s mode: server or agent
k3s_mode: server  # Override in group_vars

# Server mode settings
k3s_disable_services: []  # e.g., ['traefik']
k3s_flannel_backend: ""   # empty = default, 'none' = disable flannel
k3s_cluster_init: false   # Use for first server node in HA setup

# Agent mode settings
k3s_server_url: "{{ lookup('env', 'K3S_URL') }}"
k3s_token: "{{ lookup('env', 'K3S_TOKEN') }}"

# Node configuration
node_labels: {}
node_taints: []

# Kubeconfig
k3s_kubeconfig_path: "/etc/rancher/k3s/k3s.yaml"
local_kubeconfig_path: "~/.kube/config"

# Service settings
k3s_service_name_server: "k3s"
k3s_service_name_agent: "k3s-agent"

# Wait for k3s
k3s_wait_timeout: 300  # seconds

# Kubelet garbage collection settings
k3s_kubelet_gc_high_threshold: 70  # Start GC when disk usage > 70%
k3s_kubelet_gc_low_threshold: 60   # Stop GC when disk usage < 60%
