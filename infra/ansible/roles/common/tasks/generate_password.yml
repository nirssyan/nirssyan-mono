---
# Generate secure random password
# Required vars: password_var_name
# Optional vars: password_length (default: 32)

- name: Set password length
  ansible.builtin.set_fact:
    _password_length: "{{ password_length | default(default_password_length) }}"

- name: Generate random password
  ansible.builtin.set_fact:
    "{{ password_var_name }}": "{{ lookup('community.general.random_string', length=_password_length | int, special=false) }}"

- name: Password generated
  ansible.builtin.debug:
    msg: "Generated password for {{ password_var_name }} (length: {{ _password_length }})"
