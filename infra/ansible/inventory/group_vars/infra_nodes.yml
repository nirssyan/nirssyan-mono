---
# Infra node specific configuration
node_type: infra
node_role: infra

# Node taints
node_taints:
  - key: node-role
    value: infra
    effect: NoSchedule

# Services to deploy
deploy_docker_registry: true
deploy_grafana_stack: true
deploy_n8n: true

# k3s configuration for infra
k3s_mode: server
k3s_disable_services:
  - traefik
k3s_flannel_backend: none  # We use Calico CNI

# Private registry mirror (NodePort 30500)
registry_mirror_enabled: true
registry_username: "{{ lookup('env', 'REGISTRY_USERNAME') | default(docker_hub_username, true) }}"
registry_password: "{{ lookup('env', 'REGISTRY_PASSWORD') }}"
